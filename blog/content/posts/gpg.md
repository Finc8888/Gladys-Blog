---
title: "GPG шифрование: Шпаргалка"
description: "Шпаргалка: как защитить свои сообщения и файлы при передаче через социальные сети"
date: 2025-10-05
tldr: "Изучаем GPG: шифрование сообщений, цифровые подписи и безопасная передача файлов через соцсети"
draft: false
tags: ["безопасность", "gpg", "шифрование", "криптография", "приватность"]
toc: true
---

# GPG шифрование: Безопасная передача сообщений через соцсети

Использование GPG (GNU Privacy Guard) — это один из самых надежных способов защитить переписку через социальные сети. Ниже приводится пошаговое руководство использования gpg-шифрования для вас и вашего друга.

### Общий принцип

1.  **Вы оба** создаете свои пары ключей GPG (приватный и публичный).
2.  **Вы обмениваетесь** только **публичными ключами**. Это безопасно, их можно передавать по любым каналам.
3.  **Вы шифруете** сообщение для друга, используя **его публичный ключ**. Расшифровать это сообщение можно только с помощью **его приватного ключа**.
4.  **Друг расшифровывает** ваше сообщение своим приватным ключом.
5.  Чтобы ответить, он проделывает ту же операцию, шифруя сообщение **вашим публичным ключом**.

---

### Шаг 1: Установка программного обеспечения

#### Для Windows:
*   **Gpg4win**: Самый популярный вариант. Включает в себя GPG, менеджер ключей Kleopatra и плагин для Outlook.
    *   Скачайте с официального сайта: [https://www.gpg4win.org/](https://www.gpg4win.org/)

#### Для macOS:
*   **GPG Suite**: Отличный и удобный набор утилит.
    *   Скачайте с официального сайта: [https://gpgtools.org/](https://gpgtools.org/)

#### Для Linux:
*   В большинстве дистрибутивов GPG уже установлен. Если нет, установите через пакетный менеджер.
    *   **Ubuntu/Debian:** `sudo apt install gnupg`
    *   **Fedora/CentOS:** `sudo dnf install gnupg` или `sudo yum install gnupg`

---

### Шаг 2: Генерация пары ключей (для вас и для друга)

Сделайте это независимо друг от друга.

1.  Откройте терминал (командную строку) или программу Kleopatra (если используете Gpg4win).
2.  **В командной строке** выполните:
    ```bash
    gpg --full-generate-key
    ```
3.  Вам будут заданы вопросы:
    *   **Тип ключа:** Нажмите Enter (по умолчанию `RSA and RSA`).
    *   **Размер ключа:** Выберите `4096` (это более надежно, чем стандартные 2048).
    *   **Срок действия:** Вы можете установить срок (например, `1y` на год) или выбрать `0` (ключ не будет иметь срока действия). Ключ с истекающим сроком действия легче отозвать, но его нужно периодически продлевать.
    *   **Ваше имя:** Введите ваше реальное имя или псевдоним.
    *   **Email адрес:** Используйте тот email, который вы связываете с этим ключом.
    *   **Комментарий:** Необязательно.
    *   **Passphrase (Парольная фраза):** **Это очень важно!** Придумайте длинный и сложный пароль. Он защищает ваш приватный ключ. Если кто-то украдет ваш приватный ключ, но он будет защищен паролем, его все равно не смогут использовать.

После этого ваша пара ключей будет сгенерирована.

---

### Шаг 3: Обмен публичными ключами

**ПОВТОРЮСЬ: ОБМЕНИВАЙТЕСЬ ТОЛЬКО ПУБЛИЧНЫМИ КЛЮЧАМИ. ПРИВАТНЫЙ КЛЮЧ НИКОМУ НЕ ПОКАЗЫВАЙТЕ.**

Есть несколько способов:

#### Способ А: Экспорт в файл и отправка по соцсети/мессенджеру

1.  Найдите отпечаток вашего ключа (его "след"), чтобы убедиться в подлинности. В командной строке:
    ```bash
    gpg --list-keys
    ```
    Вы увидите строку, похожую на `rsa4096 2023-10-01 [SC] [expires: 2024-10-01]` и ниже строку с отпечатком:
    `ABCD 1234 EF56 7890 1234 5678 90AB CDEF 1234 5678`
2.  Экспортируйте свой публичный ключ в файл `my_public_key.asc`:
    ```bash
    gpg --armor --export your-email@example.com > my_public_key.asc
    ```
    Файл `my_public_key.asc` будет содержать ваш публичный ключ в текстовом виде (блок между `-----BEGIN PGP PUBLIC KEY BLOCK-----` и `-----END PGP PUBLIC KEY BLOCK-----`).
3.  Отправьте этот файл другу через соцсеть, мессенджер (Telegram, WhatsApp) или email.
4.  **ВАЖНЫЙ ШАГ: Проверка отпечатка!**
    *   **Позвоните другу по телефону** (голосовой звонок) или используйте любой другой, желательно, голосовой канал связи.
    *   **Продиктуйте ему отпечаток своего ключа** (ту длинную строку из 40 символов).
    *   **Друг должен проверить,** что отпечаток ключа, который он импортировал из файла, совпадает с тем, что вы ему продиктовали.
    *   Это защищает от атаки "человек посередине", когда злоумышленник может подменить ваш ключ в переписке.

#### Способ Б: Загрузка на keyserver (не так безопасно, но удобно)

1.  Загрузите ключ на keyserver (например, `keys.openpgp.org`):
    ```bash
    gpg --keyserver keys.openpgp.org --send-keys YOUR_KEY_ID
    ```
    (`YOUR_KEY_ID` — это последние 8 символов отпечатка вашего ключа).
2.  Друг может найти ваш ключ по email:
    ```bash
    gpg --keyserver keys.openpgp.org --search-keys your-email@example.com
    ```

**Минус:** Ваш email будет публично связан с ключом. Способ А с проверкой отпечатка по телефону — надежнее.

---

### Шаг 4: Импорт и подпись публичных ключей друг друга

1.  Получив публичный ключ друга (файл `friend_public_key.asc`), импортируйте его:
    ```bash
    gpg --import friend_public_key.asc
    ```
2.  **Рекомендуется подписать ключ друга.** Это означает, что вы подтверждаете, что этот ключ действительно принадлежит вашему другу.
    ```bash
    gpg --sign-key friend-email@example.com
    ```
    (Ответьте `y` на запрос о подтверждении).
3.  После подписи экспортируйте обновленный ключ обратно и отправьте другу, чтобы он мог импортировать вашу подпись. Это помогает строить "сеть доверия".

---

### Шаг 5: Шифрование и расшифровка сообщений

#### Как зашифровать сообщение для друга

1.  Создайте текстовый файл с вашим сообщением, например, `message.txt`.
2.  Зашифруйте его, используя публичный ключ друга (замените `friend-email@example.com` на его email):
    ```bash
    gpg --armor --encrypt --recipient friend-email@example.com message.txt
    ```
    Эта команда создаст файл `message.txt.asc` с зашифрованным текстом.
3.  Скопируйте содержимое файла `message.txt.asc` и отправьте его другу через соцсеть.

#### Как расшифровать сообщение от друга

1.  Скопируйте зашифрованное сообщение, которое вы получили, и сохраните его в файл, например, `encrypted_message.asc`.
2.  Для расшифровки выполните:
    ```bash
    gpg --decrypt encrypted_message.asc
    ```
3.  GPG автоматически поймет, что сообщение зашифровано для вас, найдет нужный приватный ключ и запросит ваш **passphrase** для его использования.
4.  После ввода правильного пароля расшифрованное сообщение появится в терминале. Вы можете перенаправить вывод в файл: `gpg --decrypt encrypted_message.asc > decrypted_message.txt`

---

### Рекомендации по использованию в соцсетях

*   **Текст:** Так как результат шифрования GPG — это текст в кодировке ASCII Armor (блок, начинающийся с `-----BEGIN PGP MESSAGE-----`), его можно безопасно вставлять в любое текстовое поле мессенджера (Telegram, WhatsApp, Signal, VK и т.д.).
*   **Файлы:** Вы можете шифровать не только текст, но и любые файлы (картинки, документы). Просто укажите путь к файлу вместо `message.txt`.
*   **Резервное копирование:** Обязательно сделайте резервную копию вашей папки с ключами (и надежно храните пароль от нее). На Windows она обычно находится в `%APPDATA%\gnupg`.

### Краткая шпаргалка для команд

*   `gpg --list-keys` - посмотреть свои ключи
*   `gpg --gen-revoke your-email` - создать сертификат отзыва (сделать это сразу после генерации ключа!)
*   `gpg --armor --export your-email` - показать публичный ключ в терминале
*   `gpg --armor --encrypt --recipient friend-email file.txt` - зашифровать
*   `gpg --decrypt file.txt.asc` - расшифровать

Следуя этим шагам, вы создадите безопасный канал для переписки, который будет практически невозможно прочитать третьим лицам, даже если они перехватят ваши сообщения.

---

*Интересуетесь другими аспектами информационной безопасности? Читайте наши статьи о [безопасности](/tags/безопасность) и [криптографии](/tags/криптография).*
