---
title: "Решение проблемы с подключением к wifi роутеру"
description: "Решение проблемы с подключением к wifi роутеру"
date: 2025-10-04
tldr: "systemd-resolved пытается использовать DNS вашего роутера (192.168.0.1) и переключается на TCP вместо UDP, что указывает на проблемы с DNS сервером роутера."
draft: false
tags: ["dns", "WiFi"]
toc: true
---

# Решение проблемы с подключением к wifi роутеру
Суть проблемы: **systemd-resolved** пытается использовать DNS вашего роутера (192.168.0.1) и переключается на TCP вместо UDP, что указывает на проблемы с DNS сервером роутера.


## Решение:

### 1. Настроить systemd-resolved на использование внешних DNS

```bash
# Редактировать конфиг
sudo vim /etc/systemd/resolved.conf
```

Добавить/изменить строки:
```ini
DNS=8.8.8.8 1.1.1.1
FallbackDNS=8.8.4.4 1.0.0.1
Domains=~.
DNSOverTLS=no
```

### 2. Применить настройки

```bash
sudo systemctl restart systemd-resolved
```

### 3. Проверить результат

```bash
# Должен работать без таймаута
nslookup google.com
```

**Проблема в том, что DNS вашего роутера (192.168.0.1) не отвечает нормально**, поэтому systemd-resolved деградирует до TCP и возникают таймауты. Решение - обойти DNS роутера и использовать публичные DNS серверы напрямую.

---

*Интересуют другие статьи по настройке домашнего роутера? Читайте наши статьи.*
